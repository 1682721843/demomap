<div class="tab-box">
  <%= render 'shared/banner', header: "#{@event.event_type.name}" %>
  <div id="navigation">
    <ul class="nav nav-pills nav-fill" id="pills-tab" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="pills-newest-tab" data-toggle="pill" href="#pills-newest" role="tab" aria-controls="pills-newest" aria-selected="true">Newest</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-loudest-tab" data-toggle="pill" href="#pills-loudest" role="tab" aria-controls="pills-loudest" aria-selected="false">Loudest</a>
      </li>
    </ul>
  </div>
</div>

<div class="container justfiy-content-center">
  <div class="row text-align">
    <div class="col-12">

<!-- 1 Tab : Newest -->
      <div class="tab-content" id="pills-tabContent">
        <div class="tab-pane fade show active" id="pills-newest" role="tabpanel" aria-labelledby="pills-newest-tab">

          <% @comments.each do |c|%>
            <div class="card-comment">
              <div class="card-comment-infos">
                <div class="card-comment-infos-content">
                  <div class="card-comment-infos-content-details">
                    <%= image_tag c.commentable.event_type.icon, alt: c.commentable.event_type.name  %>
                    <p>
                    created<br>
                    <strong><%= c.created_at.strftime("%I:%M%p") %></strong>
                    </p>
                  </div>
                  <div class="card-comment-infos-content-description">
                    <%= c.content %>
                  </div>
                </div>

                <div class="card-comment-info-votes">

                <%= simple_form_for([@demo, c], remote: true) do |form| %>
                  <%= form.input :vote, :as => :hidden, :input_html => { :value => 'up' } %>
                  <%= form.button :button, class: 'btn-votes' do %>
                    <i class="fas fa-chevron-up"></i>
                  <% end %>
                <% end %>

                <p class="weighted-score" data-id="<%= c.id %>"><%= c.weighted_score %></p>

                <%= simple_form_for([@demo, c], remote: true) do |form| %>
                  <%= form.input :vote, :as => :hidden, :input_html => { :value => 'down' } %>
                  <%= form.button :button, class: 'btn-votes' do %>
                    <i class="fas fa-chevron-down"></i>
                  <% end %>
                <% end %>

              </div>
              </div>

              <div class="card-comment-footer">
                <p>
                  <i class="fas fa-map-marker-alt"></i> <%= c.commentable.location %>
                </p>
                <p>last voted: <strong><%= c.created_at.strftime("%I:%M%p") %></strong></p>
              </div>
            </div>
          <% end %>
        </div>

    <!-- 2 Tab : Loudest -->
         <div class="tab-pane fade" id="pills-loudest" role="tabpanel" aria-labelledby="pills-loudest-tab">
          <% @votes_comments.each do |c|%>
            <div class="card-comment">
              <div class="card-comment-infos">
                <div class="card-comment-infos-content">
                  <div class="card-comment-infos-content-details">
                    <%= image_tag c.commentable.event_type.icon, alt: c.commentable.event_type.name  %>
                    <p>
                    created<br>
                    <strong><%= c.created_at.strftime("%I:%M%p") %></strong>
                    </p>
                  </div>
                  <div class="card-comment-infos-content-description">
                    <%= c.content %>
                  </div>
                </div>

                <div class="card-comment-info-votes">

                <%= simple_form_for([@demo, c], remote: true) do |form| %>
                  <%= form.input :vote, :as => :hidden, :input_html => { :value => 'up' } %>
                  <%= form.button :button, class: 'btn-votes' do %>
                    <i class="fas fa-chevron-up"></i>
                  <% end %>
                <% end %>

                <p class="weighted-score" data-id="<%= c.id %>"><%= c.weighted_score %></p>

                <%= simple_form_for([@demo, c], remote: true) do |form| %>
                  <%= form.input :vote, :as => :hidden, :input_html => { :value => 'down' } %>
                  <%= form.button :button, class: 'btn-votes' do %>
                    <i class="fas fa-chevron-down"></i>
                  <% end %>
                <% end %>

              </div>
              </div>

              <div class="card-comment-footer">
                <p>
                  <i class="fas fa-map-marker-alt"></i> <%= c.commentable.location %>
                </p>
                <p>last voted: <strong><%= c.created_at.strftime("%I:%M%p") %></strong></p>
              </div>
            </div>
          <% end %>
        </div>

<!-- Footer -->
    <div class="btn-plus">
      <%= link_to new_demo_event_comment_path(@demo, @event) do %>
        <%= image_tag "plus.svg", size: "25x25", alt: "add" %>
      <% end %>
    </div>

    </div>
  </div>
</div>
<%= render 'shared/footer' %>

